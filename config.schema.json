{
  "pluginAlias": "Yoto",
  "pluginType": "platform",
  "singular": true,
  "customUi": true,
  "headerDisplay": "**Homebridge Yoto Plugin** - Control your Yoto players through HomeKit",
  "footerDisplay": "For help and documentation, visit the [GitHub repository](https://github.com/bcomnes/homebridge-yoto)",
  "schema": {
    "type": "object",
    "properties": {
      "clientId": {
        "title": "OAuth Client ID",
        "type": "string",
        "default": "Y4HJ8BFqRQ24GQoLzgOzZ2KSqWmFG8LI",
        "required": false,
        "description": "OAuth client ID for Yoto API authentication. The default works for most users. Only change if you've created your own OAuth app at yoto.dev.",
        "x-schema-form": {
          "hidden": false
        }
      },
      "accessToken": {
        "title": "Access Token",
        "type": "string",
        "required": false,
        "description": "Automatically managed by the authentication flow. Do not edit manually.",
        "x-schema-form": {
          "type": "password"
        }
      },
      "refreshToken": {
        "title": "Refresh Token",
        "type": "string",
        "required": false,
        "description": "Automatically managed by the authentication flow. Do not edit manually.",
        "x-schema-form": {
          "type": "password"
        }
      },
      "tokenExpiresAt": {
        "title": "Token Expiration",
        "type": "number",
        "required": false,
        "description": "Automatically managed by the authentication flow. Do not edit manually.",
        "x-schema-form": {
          "hidden": true
        }
      },
      "services": {
        "title": "Accessory Services",
        "type": "object",
        "properties": {
          "playbackAccessory": {
            "title": "Playback Controls",
            "type": "string",
            "default": "none",
            "enum": ["bridged", "external", "none"],
            "enumNames": [
              "Bridged (Switch + Dimmer)",
              "External Smart Speaker",
              "None"
            ],
            "description": "Choose how playback and volume controls are exposed. External Smart Speaker requires additional pairing steps and appears as a separate accessory."
          },
          "battery": {
            "title": "Battery",
            "type": "boolean",
            "default": true,
            "description": "Expose battery status service."
          },
          "temperature": {
            "title": "Temperature Sensor",
            "type": "boolean",
            "default": true,
            "description": "Expose temperature sensor when supported."
          },
          "nightlight": {
            "title": "Nightlight",
            "type": "boolean",
            "default": false,
            "description": "Expose day/night nightlight controls and status."
          },
          "cardSlot": {
            "title": "Card Slot",
            "type": "boolean",
            "default": true,
            "description": "Expose card insertion status."
          },
          "cardControls": {
            "title": "Card Controls",
            "type": "array",
            "description": "Add switches that play a specific card ID on each Yoto device. Optionally add an accessory that plays the card on all Yotos.",
            "items": {
              "title": "Card Control",
              "type": "object",
              "properties": {
                "label": {
                  "title": "Label",
                  "type": "string",
                  "required": true,
                  "description": "Name shown in HomeKit for this card control."
                },
                "cardId": {
                  "title": "Card ID",
                  "type": "string",
                  "required": true,
                  "description": "The Yoto card ID to play."
                },
                "playOnAll": {
                  "title": "Play on All Yotos",
                  "type": "boolean",
                  "default": false,
                  "description": "Create a separate accessory that plays this card on every Yoto."
                }
              }
            }
          },
          "dayMode": {
            "title": "Day Mode",
            "type": "boolean",
            "default": true,
            "description": "Expose day mode status."
          },
          "sleepTimer": {
            "title": "Sleep Timer",
            "type": "boolean",
            "default": false,
            "description": "Expose sleep timer switch."
          },
          "bluetooth": {
            "title": "Bluetooth",
            "type": "boolean",
            "default": false,
            "description": "Expose Bluetooth toggle."
          },
          "volumeLimits": {
            "title": "Volume Limits",
            "type": "boolean",
            "default": true,
            "description": "Expose day/night max volume controls."
          }
        }
      }
    }
  },
  "layout": [
    {
      "type": "section",
      "title": "Authentication",
      "expandable": true,
      "expanded": false,
      "items": [
        {
          "type": "help",
          "helpvalue": "<p><strong>Authentication Instructions:</strong></p><ol><li>Click the <strong>\"Start Authentication\"</strong> button in the custom UI above</li><li>Follow the on-screen instructions to authorize with your Yoto account</li><li>Tokens will be saved automatically when authorization completes</li><li>Homebridge will restart and connect to your devices</li></ol><p><strong>Advanced:</strong> The default OAuth Client ID works for all users. The token fields below are automatically managed by the plugin and should not be edited manually.</p>"
        },
        "clientId",
        "accessToken",
        "refreshToken"
      ]
    },
    {
      "type": "section",
      "title": "Accessory Services",
      "items": [
        {
          "type": "help",
          "helpvalue": "<p>Select which HomeKit services to expose for each Yoto device.</p>"
        },
        {
          "type": "help",
          "helpvalue": "<p><strong>Playback Controls:</strong> External Smart Speaker requires additional pairing steps in the Home app and will appear as a separate accessory.</p>"
        },
        "services.playbackAccessory",
        "services.volumeLimits",
        "services.battery",
        "services.temperature",
        "services.cardSlot",
        "services.dayMode",
        "services.nightlight",
        "services.bluetooth",
        "services.sleepTimer",
        {
          "type": "help",
          "helpvalue": "<p><strong>Card Controls:</strong> Add switches that play a specific card ID on each Yoto. Enable \"Play on All Yotos\" to create a separate accessory.</p>"
        },
        {
          "key": "services.cardControls",
          "type": "array",
          "buttonText": "Add Card Control",
          "items": [
            "services.cardControls[].label",
            "services.cardControls[].cardId",
            "services.cardControls[].playOnAll"
          ]
        }
      ]
    }
  ]
}
